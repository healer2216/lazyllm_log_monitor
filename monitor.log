2025-10-17 09:17:15,973 [INFO] [LLM] 已加载模型: DeepSeek-V3-1
2025-10-17 09:17:15,973 [INFO] 监听目录: ./logs
2025-10-17 09:17:15,973 [INFO] ✅ 日志监控启动，按 Ctrl+C 停止...
2025-10-17 09:17:58,196 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:18:02,914 [INFO] [LLM] 成功获取响应 (耗时: 4.72s)
2025-10-17 09:18:02,915 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:18:02,915 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:22:31,591 [ERROR] [Email] 发送失败: [Errno 110] Connection timed out
2025-10-17 09:22:31,591 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_091802.json
2025-10-17 09:22:31,591 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:22:36,428 [INFO] [LLM] 成功获取响应 (耗时: 4.84s)
2025-10-17 09:22:36,428 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:22:36,428 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:27:06,023 [ERROR] [Email] 发送失败: [Errno 110] Connection timed out
2025-10-17 09:27:06,023 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_092236.json
2025-10-17 09:27:06,023 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:27:11,311 [INFO] [LLM] 成功获取响应 (耗时: 5.29s)
2025-10-17 09:27:11,312 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:27:11,312 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:30:55,626 [INFO] 🛑 监控已停止
2025-10-17 09:33:37,456 [INFO] [LLM] 已加载模型: DeepSeek-V3-1
2025-10-17 09:33:37,456 [INFO] 监听目录: ./logs
2025-10-17 09:33:37,456 [INFO] ✅ 日志监控启动，按 Ctrl+C 停止...
2025-10-17 09:34:04,285 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:34:09,801 [INFO] [LLM] 成功获取响应 (耗时: 5.51s)
2025-10-17 09:34:09,801 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:34:09,801 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:34:39,880 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:34:39,880 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_093409.json
2025-10-17 09:34:39,880 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:34:45,196 [INFO] [LLM] 成功获取响应 (耗时: 5.32s)
2025-10-17 09:34:45,197 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:34:45,197 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:35:15,236 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:35:15,237 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_093445.json
2025-10-17 09:35:15,237 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:35:23,113 [INFO] [LLM] 成功获取响应 (耗时: 7.88s)
2025-10-17 09:35:23,113 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:35:23,113 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:35:53,145 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:35:53,145 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_093523.json
2025-10-17 09:35:53,145 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:35:59,196 [INFO] [LLM] 成功获取响应 (耗时: 6.05s)
2025-10-17 09:35:59,196 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:35:59,196 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:36:29,235 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:36:29,235 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_093559.json
2025-10-17 09:36:29,236 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:36:34,352 [INFO] [LLM] 成功获取响应 (耗时: 5.12s)
2025-10-17 09:36:34,352 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:36:34,353 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:37:04,387 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:37:04,388 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_093634.json
2025-10-17 09:37:04,388 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:37:12,252 [INFO] [LLM] 成功获取响应 (耗时: 7.86s)
2025-10-17 09:37:12,253 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:37:12,253 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:37:42,287 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:37:42,287 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_093712.json
2025-10-17 09:37:42,287 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:37:50,381 [INFO] [LLM] 成功获取响应 (耗时: 8.09s)
2025-10-17 09:37:50,382 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:37:50,382 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:38:20,421 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:38:20,421 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_093750.json
2025-10-17 09:38:20,421 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:38:26,149 [INFO] [LLM] 成功获取响应 (耗时: 5.73s)
2025-10-17 09:38:26,150 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:38:26,150 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:38:56,186 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:38:56,187 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_093826.json
2025-10-17 09:38:56,187 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:39:03,458 [INFO] [LLM] 成功获取响应 (耗时: 7.27s)
2025-10-17 09:39:03,458 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:39:03,459 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:39:33,493 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:39:33,493 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_093903.json
2025-10-17 09:39:33,494 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:39:40,497 [INFO] [LLM] 成功获取响应 (耗时: 7.00s)
2025-10-17 09:39:40,498 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:39:40,498 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:40:10,535 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:40:10,535 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_093940.json
2025-10-17 09:40:10,535 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:40:15,646 [INFO] [LLM] 成功获取响应 (耗时: 5.11s)
2025-10-17 09:40:15,647 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:40:15,647 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:40:45,689 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:40:45,689 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094015.json
2025-10-17 09:40:45,689 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:40:50,333 [INFO] [LLM] 成功获取响应 (耗时: 4.64s)
2025-10-17 09:40:50,333 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:40:50,333 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:41:01,889 [INFO] 🛑 监控已停止
2025-10-17 09:41:12,147 [INFO] [LLM] 已加载模型: DeepSeek-V3-1
2025-10-17 09:41:12,147 [INFO] 监听目录: ./logs
2025-10-17 09:41:12,148 [INFO] ✅ 日志监控启动，按 Ctrl+C 停止...
2025-10-17 09:41:28,876 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:41:34,414 [INFO] [LLM] 成功获取响应 (耗时: 5.54s)
2025-10-17 09:41:34,414 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:41:34,415 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:42:04,452 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:42:04,452 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094134.json
2025-10-17 09:42:04,453 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:42:08,922 [INFO] [LLM] 成功获取响应 (耗时: 4.47s)
2025-10-17 09:42:08,923 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:42:08,923 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:42:38,954 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:42:38,954 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094208.json
2025-10-17 09:42:38,954 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:42:44,091 [INFO] [LLM] 成功获取响应 (耗时: 5.14s)
2025-10-17 09:42:44,091 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:42:44,092 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:43:14,133 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:43:14,133 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094244.json
2025-10-17 09:43:14,133 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:43:19,743 [INFO] [LLM] 成功获取响应 (耗时: 5.61s)
2025-10-17 09:43:19,744 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:43:19,744 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:43:49,788 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:43:49,788 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094319.json
2025-10-17 09:43:49,788 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:43:55,136 [INFO] [LLM] 成功获取响应 (耗时: 5.35s)
2025-10-17 09:43:55,136 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:43:55,136 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:44:25,171 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:44:25,171 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094355.json
2025-10-17 09:44:25,171 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:44:30,313 [INFO] [LLM] 成功获取响应 (耗时: 5.14s)
2025-10-17 09:44:30,313 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:44:30,313 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:45:00,384 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:45:00,385 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094430.json
2025-10-17 09:45:00,385 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:45:05,078 [INFO] [LLM] 成功获取响应 (耗时: 4.69s)
2025-10-17 09:45:05,079 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:45:05,079 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:45:35,114 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:45:35,114 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094505.json
2025-10-17 09:45:35,114 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:45:39,869 [INFO] [LLM] 成功获取响应 (耗时: 4.75s)
2025-10-17 09:45:39,869 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:45:39,869 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:46:09,904 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:46:09,904 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094539.json
2025-10-17 09:46:09,904 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:46:14,621 [INFO] [LLM] 成功获取响应 (耗时: 4.72s)
2025-10-17 09:46:14,621 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:46:14,621 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:46:44,655 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:46:44,655 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094614.json
2025-10-17 09:46:44,655 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:46:51,444 [INFO] [LLM] 成功获取响应 (耗时: 6.79s)
2025-10-17 09:46:51,444 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:46:51,444 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:47:21,479 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:47:21,479 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_094651.json
2025-10-17 09:47:21,479 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:47:27,198 [INFO] [LLM] 成功获取响应 (耗时: 5.72s)
2025-10-17 09:47:27,198 [WARNING] JSON 解析失败: name 'json' is not defined
2025-10-17 09:47:27,198 [ERROR] AI 返回非 JSON 内容，转存原始输出
2025-10-17 09:47:52,394 [INFO] 🛑 监控已停止
2025-10-17 09:47:57,836 [INFO] [LLM] 已加载模型: DeepSeek-V3-1
2025-10-17 09:47:57,836 [INFO] 监听目录: ./logs
2025-10-17 09:47:57,836 [INFO] ✅ 日志监控启动，按 Ctrl+C 停止...
2025-10-17 09:49:16,284 [INFO] 🛑 监控已停止
2025-10-17 09:49:20,470 [INFO] [LLM] 已加载模型: DeepSeek-V3-1
2025-10-17 09:49:20,470 [INFO] 监听目录: ./logs
2025-10-17 09:49:20,470 [INFO] ✅ 日志监控启动，按 Ctrl+C 停止...
2025-10-17 09:50:24,471 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:50:29,527 [INFO] [LLM] 成功获取响应 (耗时: 5.06s)
2025-10-17 09:50:29,528 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，连接被拒绝",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务(192.168.250.7:8080)是否正常运行",
    "验证网络连通性及防火墙规则",
    "检查Nginx upstream配置是否正确",
    "确认后端服务监听端口和绑定地址",
    "查看后端服务日志确认启动状态"
  ],
  "solution": {
    "immediate": "重启上游服务或检查服务状态，临时修改Nginx配置将流量转发到备用节点",
    "long_term": "完善服务健康检查机制，部署负载均衡和高可用架构，实施监控告警系统"
  }
}
```
2025-10-17 09:50:30,205 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:50:30,206 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095029.json
2025-10-17 09:50:30,206 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:50:35,395 [INFO] [LLM] 成功获取响应 (耗时: 5.19s)
2025-10-17 09:50:35,395 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": ["检查上游服务是否正常运行（进程状态、端口监听）", "验证网络连通性（防火墙规则、路由配置）", "检查Nginx upstream配置是否正确", "确认服务依赖项（如数据库、中间件）是否可用", "查看应用日志排查服务启动异常"],
  "solution": {
    "immediate": "重启上游服务并验证健康检查接口可访问，临时调整Nginx将流量转发到备用节点",
    "long_term": "完善服务健康监测机制，部署负载均衡和自动故障转移，优化应用启动脚本确保依赖项就绪，配置连接超时和重试策略"
  }
}
```
2025-10-17 09:50:36,062 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:50:36,062 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095035.json
2025-10-17 09:50:36,062 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:50:42,093 [INFO] [LLM] 成功获取响应 (耗时: 6.03s)
2025-10-17 09:50:42,094 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx无法连接上游服务192.168.250.7:8080导致健康检查失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常运行",
    "验证网络连通性（防火墙、路由、安全组策略）",
    "检查上游服务端口监听状态（netstat/ss命令）",
    "确认负载均衡配置中的upstream服务器地址正确性",
    "检查上游服务日志和系统资源状态（CPU/内存/磁盘）"
  ],
  "solution": {
    "immediate": "1. 重启上游服务进程 2. 临时调整Nginx配置将流量切换到备用节点 3. 检查并修复网络策略",
    "long_term": "1. 实施服务高可用架构 2. 完善监控告警机制 3. 建立自动化健康检查和服务发现"
  }
}
```
2025-10-17 09:50:42,774 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:50:42,774 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095042.json
2025-10-17 09:50:42,774 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:50:50,066 [INFO] [LLM] 成功获取响应 (耗时: 7.29s)
2025-10-17 09:50:50,066 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务(192.168.250.7:8080)是否正常运行",
    "验证网络连通性：使用ping/telnet测试到192.168.250.7的网络连接和端口可达性",
    "检查防火墙规则是否阻止了到8080端口的连接",
    "确认上游服务配置是否正确（nginx upstream配置）",
    "检查上游服务日志，查看应用启动异常或崩溃原因",
    "确认服务发现/负载均衡配置（如使用容器编排需检查服务端点状态）"
  ],
  "solution": {
    "immediate": "1. 重启上游服务尝试恢复连接 2. 临时调整nginx配置将流量转发到备用节点（如有） 3. 检查并解除可能存在的防火墙阻断",
    "long_term": "1. 实施健康检查机制自动剔除故障节点 2. 建立服务监控告警体系 3. 完善高可用架构确保服务冗余 4. 配置连接超时和重试机制"
  }
}
```
2025-10-17 09:50:50,830 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:50:50,830 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095050.json
2025-10-17 09:50:50,830 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:50:56,504 [INFO] [LLM] 成功获取响应 (耗时: 5.67s)
2025-10-17 09:50:56,505 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务(192.168.250.7:8080)是否正常运行",
    "验证网络连通性：ping 192.168.250.7 和 telnet 192.168.250.7 8080",
    "检查防火墙规则和安全组配置",
    "确认上游服务监听地址和端口配置",
    "检查应用日志确认服务崩溃或启动失败原因",
    "验证负载均衡配置和服务发现机制"
  ],
  "solution": {
    "immediate": "重启上游服务，检查服务状态并临时恢复访问",
    "long_term": "实施健康检查机制，配置故障转移策略，完善监控告警系统，确保服务高可用性"
  }
}
```
2025-10-17 09:50:57,164 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:50:57,164 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095056.json
2025-10-17 09:50:57,164 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:51:02,697 [INFO] [LLM] 成功获取响应 (耗时: 5.53s)
2025-10-17 09:51:02,697 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080的运行状态和端口监听情况",
    "验证网络连通性（防火墙规则、路由表、DNS解析）",
    "检查Nginx upstream配置和服务发现机制",
    "确认后端服务健康检查配置和资源占用情况",
    "查看应用日志排查服务崩溃或启动失败原因"
  ],
  "solution": {
    "immediate": "重启上游服务并验证服务状态，临时调整Nginx超时设置或故障转移配置",
    "long_term": "实施服务健康监控和自动重启机制，完善日志记录和告警，部署负载均衡和高可用架构"
  }
}
```
2025-10-17 09:51:03,415 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:51:03,415 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095102.json
2025-10-17 09:51:03,415 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:51:08,128 [INFO] [LLM] 成功获取响应 (耗时: 4.71s)
2025-10-17 09:51:08,128 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": ["检查上游服务(192.168.250.7:8080)进程状态和端口监听", "验证网络连通性(防火墙、路由、安全组)", "检查应用配置(服务发现、健康检查)", "确认负载均衡器配置"],
  "solution": {
    "immediate": "重启上游服务并验证端口监听，临时调整Nginx超时设置或故障转移配置",
    "long_term": "实施服务健康监控和自动重启机制，完善负载均衡策略，部署服务网格进行流量管理"
  }
}
```
2025-10-17 09:51:08,805 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:51:08,805 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095108.json
2025-10-17 09:51:08,805 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:51:13,391 [INFO] [LLM] 成功获取响应 (耗时: 4.59s)
2025-10-17 09:51:13,391 [INFO] [LLM Raw Output]:
```json
{
  "summary": "反向代理服务器无法连接到上游应用服务，导致API请求失败",
  "severity": "高",
  "diagnosis_path": ["检查上游服务192.168.250.7:8080的运行状态和端口监听", "验证网络连通性（防火墙规则、路由配置）", "检查反向代理配置中的upstream设置", "确认应用服务是否崩溃或资源耗尽", "查看应用服务自身日志以确定停止原因"],
  "solution": {
    "immediate": "重启上游应用服务恢复连接，检查系统资源使用情况，临时使用备用节点",
    "long_term": "实施服务健康检查机制，配置负载均衡和高可用架构，完善监控告警系统"
  }
}
```
2025-10-17 09:51:13,959 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:51:13,959 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095113.json
2025-10-17 09:51:13,959 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:51:19,660 [INFO] [LLM] 成功获取响应 (耗时: 5.70s)
2025-10-17 09:51:19,660 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务器192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务器192.168.250.7:8080的服务状态（是否崩溃或未启动）",
    "验证网络连通性（防火墙规则、路由配置、端口可达性）",
    "检查上游服务器监听配置（netstat/ss确认8080端口监听状态）",
    "审查Nginx upstream配置（服务器地址和端口是否正确）",
    "检查上游服务器资源状态（CPU、内存、磁盘空间是否耗尽）"
  ],
  "solution": {
    "immediate": "重启上游服务进程，检查系统资源并临时重启服务恢复连接",
    "long_term": "实施服务健康检查机制，配置负载均衡和高可用架构，完善监控告警系统"
  }
}
```
2025-10-17 09:51:20,499 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:51:20,499 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095119.json
2025-10-17 09:51:20,499 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:51:25,880 [INFO] [LLM] 成功获取响应 (耗时: 5.38s)
2025-10-17 09:51:25,881 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx无法连接到上游服务192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常启动和监听端口",
    "验证网络连通性（防火墙规则、路由设置）",
    "检查Nginx upstream配置是否正确",
    "确认后端服务健康状态和资源使用情况（CPU/内存/磁盘）",
    "查看后端服务自身日志以确定拒绝连接的具体原因"
  ],
  "solution": {
    "immediate": "重启上游服务并验证服务状态，临时调整Nginx配置将流量切换到备用节点（如有）",
    "long_term": "实施服务健康检查机制，配置负载均衡和自动故障转移，完善监控告警系统"
  }
}
```
2025-10-17 09:51:26,498 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:51:26,498 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095125.json
2025-10-17 09:51:26,498 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:51:32,506 [INFO] [LLM] 成功获取响应 (耗时: 6.01s)
2025-10-17 09:51:32,507 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务器192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务器192.168.250.7:8080的服务状态（是否宕机或未启动）",
    "验证网络连通性（防火墙规则、路由设置、端口访问性）",
    "检查上游服务器配置（Nginx upstream配置是否正确）",
    "确认后端应用健康状态（应用进程是否存在、端口监听是否正常）",
    "检查依赖服务（如数据库、中间件）是否可用"
  ],
  "solution": {
    "immediate": "重启上游服务器应用服务，检查并恢复网络连通性，临时启用备用节点（如有）",
    "long_term": "实施高可用架构（负载均衡+健康检查），完善监控告警机制，建立自动化故障恢复流程"
  }
}
```
2025-10-17 09:51:33,090 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:51:33,090 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095132.json
2025-10-17 09:51:33,090 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:51:37,019 [INFO] [LLM] 成功获取响应 (耗时: 3.93s)
2025-10-17 09:51:37,019 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx upstream连接被拒绝，导致API请求失败",
  "severity": "中",
  "diagnosis_path": ["检查上游服务192.168.250.7:8080状态", "验证网络连通性和防火墙规则", "检查Nginx upstream配置", "确认后端服务健康状态和资源使用情况"],
  "solution": {
    "immediate": "重启上游服务或检查服务状态，临时将流量切换到备用节点",
    "long_term": "完善服务健康检查机制，配置负载均衡和自动故障转移，实施监控告警"
  }
}
```
2025-10-17 09:51:37,585 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:51:37,585 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095137.json
2025-10-17 09:51:37,586 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:51:44,621 [INFO] [LLM] 成功获取响应 (耗时: 7.04s)
2025-10-17 09:51:44,622 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务(192.168.250.7:8080)，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务(192.168.250.7:8080)是否正常运行",
    "验证网络连通性：ping和telnet测试到192.168.250.7的8080端口",
    "检查防火墙规则是否阻止了到上游端口的连接",
    "确认上游服务配置是否正确（nginx upstream配置）",
    "检查上游服务日志，查看是否有启动失败或崩溃记录",
    "验证上游服务的资源使用情况（CPU、内存、端口占用）"
  ],
  "solution": {
    "immediate": "1. 重启上游服务尝试恢复连接 2. 检查并临时禁用可能阻挡连接的防火墙规则 3. 如有备份节点，暂时将流量切换到备用上游服务",
    "long_term": "1. 实施服务健康检查机制 2. 配置负载均衡和故障转移策略 3. 建立监控告警系统 4. 完善日志记录和追踪机制"
  }
}
```
2025-10-17 09:51:45,276 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:51:45,276 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095144.json
2025-10-17 09:51:45,277 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:51:51,650 [INFO] [LLM] 成功获取响应 (耗时: 6.37s)
2025-10-17 09:51:51,651 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务(192.168.250.7:8080)，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务(192.168.250.7:8080)是否正常运行",
    "验证网络连通性：从Nginx容器到上游服务的网络连接",
    "检查防火墙规则和网络安全组配置",
    "确认上游服务监听端口是否正确配置",
    "检查负载均衡器或服务发现配置",
    "查看上游服务自身日志以确定拒绝连接的原因"
  ],
  "solution": {
    "immediate": "1. 重启上游服务尝试恢复连接 2. 检查上游服务健康状态 3. 临时调整Nginx配置指向备用服务节点",
    "long_term": "1. 实施服务健康检查机制 2. 配置负载均衡和多节点部署 3. 建立服务监控和自动恢复机制 4. 完善日志记录和告警系统"
  }
}
```
2025-10-17 09:51:52,358 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:51:52,358 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095151.json
2025-10-17 09:51:52,358 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:51:56,760 [INFO] [LLM] 成功获取响应 (耗时: 4.40s)
2025-10-17 09:51:56,761 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": ["检查上游服务192.168.250.7:8080是否正常运行", "验证网络连通性（防火墙、路由）", "检查上游服务配置（端口监听、绑定地址）", "确认负载均衡或服务发现配置"],
  "solution": {
    "immediate": "重启上游服务或检查服务状态，临时调整Nginx配置指向备用节点",
    "long_term": "完善服务健康检查机制，实现自动故障转移，建立监控告警系统"
  }
}
```
2025-10-17 09:51:57,398 [ERROR] [Email] 发送失败: (-1, b'\x00\x00\x00')
2025-10-17 09:51:57,398 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095156.json
2025-10-17 09:51:57,399 [INFO] 【去重】跳过重复告警
2025-10-17 09:51:57,399 [INFO] 【去重】跳过重复告警
2025-10-17 09:51:57,399 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:52:02,313 [INFO] [LLM] 成功获取响应 (耗时: 4.91s)
2025-10-17 09:52:02,314 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常运行",
    "验证网络连通性（防火墙规则、路由设置）",
    "确认上游服务监听端口配置是否正确",
    "检查负载均衡或服务发现配置",
    "查看上游服务自身日志以获取详细错误信息"
  ],
  "solution": {
    "immediate": "重启上游服务或检查服务状态，临时调整Nginx配置将流量切换到备用节点",
    "long_term": "完善服务健康检查机制，实施自动化故障转移，加强监控告警系统"
  }
}
```
2025-10-17 09:52:02,552 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:52:02,552 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095202.json
2025-10-17 09:52:02,553 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:52:08,949 [INFO] [LLM] 成功获取响应 (耗时: 6.40s)
2025-10-17 09:52:08,950 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务器192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务器192.168.250.7:8080的服务状态和端口监听情况",
    "验证网络连通性（防火墙规则、路由配置）",
    "检查Nginx upstream配置是否正确",
    "确认后端应用是否正常启动且无端口冲突",
    "查看上游服务器系统资源（CPU、内存、磁盘）状态",
    "检查应用日志是否有启动异常或崩溃记录"
  ],
  "solution": {
    "immediate": "1. 重启上游服务器应用服务 2. 临时调整Nginx配置将流量转发到备用节点 3. 检查并放行防火墙规则",
    "long_term": "1. 实现上游服务健康检查机制 2. 部署负载均衡和高可用架构 3. 完善监控告警系统 4. 建立自动化故障转移流程"
  }
}
```
2025-10-17 09:52:09,203 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:52:09,203 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095208.json
2025-10-17 09:52:09,203 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:52:14,448 [INFO] [LLM] 成功获取响应 (耗时: 5.24s)
2025-10-17 09:52:14,448 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常启动和监听端口",
    "验证网络连通性（防火墙规则、路由设置）",
    "确认Nginx upstream配置是否正确",
    "检查上游服务器资源状态（CPU、内存、进程数）",
    "查看上游服务应用日志排查启动异常"
  ],
  "solution": {
    "immediate": "重启上游服务并验证服务状态，临时调整Nginx配置将流量转发到备用节点",
    "long_term": "完善服务健康检查机制，部署负载均衡和高可用架构，建立监控告警体系"
  }
}
```
2025-10-17 09:52:14,691 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:52:14,691 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095214.json
2025-10-17 09:52:14,691 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:52:21,339 [INFO] [LLM] 成功获取响应 (耗时: 6.65s)
2025-10-17 09:52:21,339 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务（192.168.250.7:8080），导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常运行（进程状态、端口监听）",
    "验证网络连通性（防火墙规则、路由配置、安全组策略）",
    "检查Nginx upstream配置（后端服务器地址/端口是否正确）",
    "排查上游服务资源状态（CPU/内存/磁盘是否过载或崩溃）",
    "检查应用日志（上游服务自身错误或启动故障）"
  ],
  "solution": {
    "immediate": "1. 重启上游服务进程 2. 临时调整Nginx将流量转发到备用节点（如有） 3. 检查并放通防火墙策略",
    "long_term": "1. 部署服务健康检查机制 2. 配置负载均衡和高可用架构 3. 完善监控告警（服务状态、端口存活检测） 4. 实施自动化故障转移"
  }
}
```
2025-10-17 09:52:21,609 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:52:21,610 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095221.json
2025-10-17 09:52:21,610 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:52:26,818 [INFO] [LLM] 成功获取响应 (耗时: 5.21s)
2025-10-17 09:52:26,819 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务（192.168.250.7:8080），导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常运行",
    "验证网络连通性（防火墙规则、路由配置）",
    "确认上游服务监听地址和端口配置",
    "检查负载均衡或服务发现配置（如适用）",
    "审查应用健康检查机制和日志"
  ],
  "solution": {
    "immediate": "重启上游服务或检查服务状态，临时调整Nginx超时设置并启用错误缓存页面",
    "long_term": "部署服务健康监控和自动重启机制，完善日志记录和告警，优化服务发现和负载均衡配置"
  }
}
```
2025-10-17 09:52:27,114 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:52:27,114 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095226.json
2025-10-17 09:52:27,114 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:52:32,405 [INFO] [LLM] 成功获取响应 (耗时: 5.29s)
2025-10-17 09:52:32,405 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务（192.168.250.7:8080），导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080的存活状态和端口监听情况",
    "验证网络连通性（防火墙规则、路由配置）",
    "检查Nginx upstream配置是否正确",
    "确认上游服务是否存在资源不足或崩溃问题",
    "查看上游服务自身日志以定位启动失败原因"
  ],
  "solution": {
    "immediate": "重启上游服务并验证端口监听；临时调整Nginx配置将流量切换到备用节点（如有）",
    "long_term": "实施服务健康检查机制；部署负载均衡和高可用架构；完善监控告警系统"
  }
}
```
2025-10-17 09:52:32,622 [ERROR] [Email] 发送失败: Connection unexpectedly closed
2025-10-17 09:52:32,622 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095232.json
2025-10-17 09:52:32,622 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,622 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,622 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:52:32,623 [INFO] 【去重】跳过重复告警
2025-10-17 09:58:57,065 [INFO] 🛑 监控已停止
2025-10-17 09:59:02,054 [INFO] [LLM] 已加载模型: DeepSeek-V3-1
2025-10-17 09:59:02,054 [INFO] 监听目录: ./logs
2025-10-17 09:59:02,054 [INFO] ✅ 日志监控启动，按 Ctrl+C 停止...
2025-10-17 09:59:27,563 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:59:52,479 [INFO] [LLM] 成功获取响应 (耗时: 24.92s)
2025-10-17 09:59:52,479 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务，连接被拒绝",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常运行",
    "确认网络连通性和防火墙规则",
    "验证Nginx upstream配置是否正确",
    "检查目标服务端口监听状态",
    "排查服务依赖和资源占用情况"
  ],
  "solution": {
    "immediate": "重启上游服务并检查服务状态，临时调整Nginx到备用上游",
    "long_term": "完善服务健康检查机制，配置负载均衡和故障转移，实施监控告警"
  }
}
```
2025-10-17 09:59:52,480 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 09:59:52,604 [INFO] [Email] 正在登录...
2025-10-17 09:59:52,752 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 09:59:52,752 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095952.json
2025-10-17 09:59:52,753 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 09:59:57,574 [INFO] [LLM] 成功获取响应 (耗时: 4.82s)
2025-10-17 09:59:57,575 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，连接被拒绝",
  "severity": "高",
  "diagnosis_path": ["检查上游服务状态（是否运行、端口监听）", "验证网络连通性（防火墙规则、路由设置）", "检查Nginx upstream配置（服务器地址和端口）", "确认服务依赖项（数据库、外部API）是否正常", "查看应用日志排查启动错误"],
  "solution": {
    "immediate": "重启上游服务并验证健康检查接口，临时调整Nginx超时设置或启用备份上游节点",
    "long_term": "实施服务健康监控和自动重启机制，完善Nginx熔断策略，优化服务发现配置"
  }
}
```
2025-10-17 09:59:57,575 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 09:59:57,662 [INFO] [Email] 正在登录...
2025-10-17 09:59:57,788 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 09:59:57,788 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_095957.json
2025-10-17 09:59:57,789 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:00:03,243 [INFO] [LLM] 成功获取响应 (耗时: 5.45s)
2025-10-17 10:00:03,243 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx无法连接到上游服务192.168.250.7:8080，持续返回连接拒绝错误",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常运行",
    "验证网络连通性（防火墙规则、路由设置）",
    "检查上游服务配置（端口监听、绑定地址）",
    "确认负载均衡或服务发现配置是否正确",
    "检查应用依赖服务状态（数据库、中间件等）"
  ],
  "solution": {
    "immediate": "重启上游服务或检查服务状态，临时调整Nginx配置将流量切换到备用节点",
    "long_term": "完善健康检查机制，实现服务自动恢复，部署监控告警系统，优化服务发现和负载均衡配置"
  }
}
```
2025-10-17 10:00:03,244 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:00:03,315 [INFO] [Email] 正在登录...
2025-10-17 10:00:03,452 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:00:03,452 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100003.json
2025-10-17 10:00:03,452 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:00:09,801 [INFO] [LLM] 成功获取响应 (耗时: 6.35s)
2025-10-17 10:00:09,801 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务(192.168.250.7:8080)是否正常运行",
    "验证网络连通性：使用ping/telnet测试到192.168.250.7的网络连接和端口可达性",
    "检查防火墙规则是否阻止了到8080端口的连接",
    "确认上游服务配置是否正确（nginx upstream配置）",
    "检查上游服务日志，查看应用启动异常或崩溃原因",
    "验证容器/进程健康状态（如果是容器化部署）"
  ],
  "solution": {
    "immediate": "重启上游服务进程/容器，检查服务监控面板确认服务状态，临时调整nginx配置将流量转发到备用节点",
    "long_term": "完善服务健康检查机制，实现自动重启和故障转移；设置监控告警；优化服务启动脚本确保高可用性"
  }
}
```
2025-10-17 10:00:09,802 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:00:09,897 [INFO] [Email] 正在登录...
2025-10-17 10:00:10,029 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:00:10,029 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100009.json
2025-10-17 10:00:10,030 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:00:15,784 [INFO] [LLM] 成功获取响应 (耗时: 5.75s)
2025-10-17 10:00:15,785 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务器192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务器192.168.250.7:8080的服务状态（是否宕机或未启动）",
    "验证网络连通性（防火墙规则、路由设置、端口访问性）",
    "检查Nginx upstream配置（后端服务器地址和端口是否正确）",
    "确认后端应用健康状态（应用是否崩溃或资源耗尽）",
    "检查依赖服务（如数据库、中间件）是否正常"
  ],
  "solution": {
    "immediate": "重启上游服务器应用服务；检查并修复网络策略；临时将流量切换到备用节点（如有）",
    "long_term": "实施健康检查机制和自动故障转移；完善监控告警；优化应用容错和自愈能力"
  }
}
```
2025-10-17 10:00:15,785 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:00:15,892 [INFO] [Email] 正在登录...
2025-10-17 10:00:16,043 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:00:16,044 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100015.json
2025-10-17 10:00:16,044 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:00:24,489 [INFO] [LLM] 成功获取响应 (耗时: 8.44s)
2025-10-17 10:00:24,489 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到后端服务192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查后端服务状态：确认192.168.250.7:8080的服务进程是否正常运行",
    "网络连通性检查：使用ping/telnet验证到192.168.250.7的网络和端口可达性",
    "防火墙配置：检查服务器和网络防火墙是否阻止了8080端口的连接",
    "服务配置：确认Nginx upstream配置是否正确指向有效的后端地址",
    "资源监控：检查后端服务器CPU/内存是否过载导致服务崩溃",
    "日志分析：查看后端应用日志确认服务异常原因"
  ],
  "solution": {
    "immediate": "重启后端服务恢复连接，临时启用备用实例，调整Nginx upstream到备用节点",
    "long_term": "实施服务健康检查机制，部署负载均衡和高可用架构，完善监控告警系统"
  }
}
```
2025-10-17 10:00:24,490 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:00:24,598 [INFO] [Email] 正在登录...
2025-10-17 10:00:24,775 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:00:24,775 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100024.json
2025-10-17 10:00:24,775 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:00:41,016 [INFO] [LLM] 成功获取响应 (耗时: 16.24s)
2025-10-17 10:00:41,016 [INFO] [LLM Raw Output]:
```json
{
  "summary": "上游服务192.168.250.7:8080连接被拒绝，导致API请求失败",
  "severity": "高",
  "diagnosis_path": ["检查上游服务状态（是否运行、端口监听）", "验证网络连通性（防火墙规则、路由配置）", "检查负载均衡/服务发现配置", "确认上游服务资源使用情况（CPU/内存/文件描述符）"],
  "solution": {
    "immediate": "重启上游服务并验证监听端口，临时调整Nginx超时设置防止请求堆积",
    "long_term": "实施服务健康检查机制，完善监控告警，优化服务高可用架构（如集群部署）"
  }
}
```
2025-10-17 10:00:41,017 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:00:41,104 [INFO] [Email] 正在登录...
2025-10-17 10:00:41,256 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:00:41,257 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100041.json
2025-10-17 10:00:41,257 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:00:47,524 [INFO] [LLM] 成功获取响应 (耗时: 6.27s)
2025-10-17 10:00:47,524 [INFO] [LLM Raw Output]:
```json
{
  "summary": "上游服务192.168.250.7:8080连接被拒绝，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务(192.168.250.7:8080)进程状态和端口监听状态",
    "验证网络连通性(telnet/nc测试端口可达性)",
    "检查防火墙规则和网络安全组配置",
    "确认上游服务健康检查端点(/api/health)返回状态",
    "查看上游服务自身日志排查启动异常",
    "检查负载均衡配置和服务发现机制"
  ],
  "solution": {
    "immediate": "1. 重启上游服务进程 2. 临时调整nginx配置将流量切换到备用节点 3. 检查并修复服务健康检查机制",
    "long_term": "1. 实现服务高可用架构 2. 完善监控告警体系 3. 建立自动化故障转移机制 4. 优化服务健康检查和自愈能力"
  }
}
```
2025-10-17 10:00:47,525 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:00:47,616 [INFO] [Email] 正在登录...
2025-10-17 10:00:47,755 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:00:47,756 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100047.json
2025-10-17 10:00:47,756 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:00:52,912 [INFO] [LLM] 成功获取响应 (耗时: 5.16s)
2025-10-17 10:00:52,913 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": ["检查上游服务状态（是否崩溃或未启动）", "验证网络连通性（防火墙规则、路由配置）", "检查端口监听状态（netstat/ss命令）", "确认负载均衡配置（upstream配置健康检查）", "查看应用日志（排查应用级错误）"],
  "solution": {
    "immediate": "重启上游服务并验证端口监听，临时调整Nginx将流量切换到备用节点（如有）",
    "long_term": "部署服务健康检查与自动重启机制，完善监控告警，优化Nginx upstream配置重试策略"
  }
}
```
2025-10-17 10:00:52,913 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:00:53,002 [INFO] [Email] 正在登录...
2025-10-17 10:00:53,159 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:00:53,159 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100052.json
2025-10-17 10:00:53,159 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:00:59,449 [INFO] [LLM] 成功获取响应 (耗时: 6.29s)
2025-10-17 10:00:59,449 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务(192.168.250.7:8080)是否正常运行",
    "验证网络连通性：从Nginx容器到上游服务的端口可达性",
    "检查上游服务配置：确认监听地址和端口是否正确",
    "检查防火墙规则：是否存在端口拦截",
    "查看上游服务日志：排查应用启动失败原因",
    "检查资源使用情况：CPU/内存是否过载导致服务崩溃"
  ],
  "solution": {
    "immediate": "1. 重启上游服务进程 2. 临时使用备用节点替换 3. 检查并修复服务健康检查端点",
    "long_term": "1. 实现服务高可用架构 2. 完善监控告警机制 3. 配置自动重启策略 4. 建立服务健康检查体系"
  }
}
```
2025-10-17 10:00:59,450 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:00:59,531 [INFO] [Email] 正在登录...
2025-10-17 10:00:59,712 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:00:59,712 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100059.json
2025-10-17 10:00:59,712 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:01:04,907 [INFO] [LLM] 成功获取响应 (耗时: 5.20s)
2025-10-17 10:01:04,907 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务（192.168.250.7:8080），导致所有API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务（192.168.250.7:8080）是否正常运行",
    "验证网络连通性（防火墙规则、路由配置）",
    "检查上游服务端口监听状态（netstat/ss命令）",
    "确认负载均衡或服务发现配置是否正确",
    "检查应用日志（上游服务自身错误或崩溃）"
  ],
  "solution": {
    "immediate": "重启上游服务并验证健康状态，临时调整Nginx配置将流量切换到备用节点",
    "long_term": "实施健康检查机制，部署服务监控和自动恢复系统，优化服务发现配置"
  }
}
```
2025-10-17 10:01:04,908 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:01:04,993 [INFO] [Email] 正在登录...
2025-10-17 10:01:05,132 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:01:05,132 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100104.json
2025-10-17 10:01:05,132 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:01:09,387 [INFO] [LLM] 成功获取响应 (耗时: 4.25s)
2025-10-17 10:01:09,388 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理连接上游服务失败，返回Connection refused错误",
  "severity": "中",
  "diagnosis_path": ["检查上游服务192.168.250.7:8080是否正常运行", "验证网络连通性及防火墙规则", "确认Nginx upstream配置是否正确", "检查上游服务日志排查启动失败原因"],
  "solution": {
    "immediate": "重启上游服务尝试恢复连接，临时调整Nginx配置将流量切换到备用节点",
    "long_term": "完善服务健康检查机制，实现自动故障转移，建立监控告警系统实时检测服务状态"
  }
}
```
2025-10-17 10:01:09,388 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:01:09,486 [INFO] [Email] 正在登录...
2025-10-17 10:01:09,632 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:01:09,632 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100109.json
2025-10-17 10:01:09,632 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:01:14,713 [INFO] [LLM] 成功获取响应 (耗时: 5.08s)
2025-10-17 10:01:14,713 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常运行",
    "验证网络连通性（防火墙、路由、端口访问）",
    "检查Nginx upstream配置是否正确",
    "确认后端服务监听地址和端口绑定",
    "检查后端服务日志确认拒绝连接的具体原因"
  ],
  "solution": {
    "immediate": "重启上游服务或检查服务状态，临时调整Nginx upstream到备用节点",
    "long_term": "完善服务健康检查机制，实现负载均衡自动故障转移，加强监控告警"
  }
}
```
2025-10-17 10:01:14,714 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:01:14,804 [INFO] [Email] 正在登录...
2025-10-17 10:01:14,951 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:01:14,951 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100114.json
2025-10-17 10:01:14,951 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:01:21,544 [INFO] [LLM] 成功获取响应 (耗时: 6.59s)
2025-10-17 10:01:21,545 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务(192.168.250.7:8080)，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务(192.168.250.7:8080)是否正常运行",
    "验证网络连通性：ping和telnet测试192.168.250.7的8080端口",
    "检查防火墙规则和安全组配置",
    "确认上游服务监听地址和端口配置是否正确",
    "检查负载均衡配置和健康检查状态",
    "查看上游服务应用日志排查启动失败原因"
  ],
  "solution": {
    "immediate": "重启上游服务或检查服务状态，临时调整Nginx配置将流量转发到备用节点",
    "long_term": "完善服务监控和自动重启机制，实施负载均衡和高可用架构，建立完善的健康检查机制"
  }
}
```
2025-10-17 10:01:21,545 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:01:21,621 [INFO] [Email] 正在登录...
2025-10-17 10:01:21,774 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:01:21,774 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100121.json
2025-10-17 10:01:21,774 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:01:48,351 [INFO] [LLM] 成功获取响应 (耗时: 26.58s)
2025-10-17 10:01:48,351 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务器192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务器192.168.250.7:8080的网络连通性（防火墙、路由）",
    "验证上游服务是否正常运行（进程状态、端口监听）",
    "检查Nginx upstream配置是否正确",
    "确认上游服务器资源状态（CPU、内存、负载）",
    "排查应用日志查看服务异常原因"
  ],
  "solution": {
    "immediate": "重启上游服务或临时切换备用节点，检查防火墙规则",
    "long_term": "实施服务健康检查机制，完善监控告警，部署负载均衡和高可用架构"
  }
}
```
2025-10-17 10:01:48,352 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:01:48,450 [INFO] [Email] 正在登录...
2025-10-17 10:01:48,630 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:01:48,631 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100148.json
2025-10-17 10:01:48,631 [INFO] 【去重】跳过重复告警
2025-10-17 10:01:48,631 [INFO] 【去重】跳过重复告警
2025-10-17 10:01:48,631 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:01:53,814 [INFO] [LLM] 成功获取响应 (耗时: 5.18s)
2025-10-17 10:01:53,815 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务器192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务器192.168.250.7:8080的服务状态和端口监听情况",
    "验证网络连通性（防火墙规则、路由配置）",
    "检查Nginx upstream配置是否正确",
    "确认后端应用是否正常启动且无端口冲突",
    "检查系统资源（CPU、内存、文件描述符）是否充足"
  ],
  "solution": {
    "immediate": "重启上游服务器服务或检查防火墙规则临时放行",
    "long_term": "完善服务健康检查机制，配置负载均衡和故障转移，实施监控告警"
  }
}
```
2025-10-17 10:01:53,815 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:01:53,930 [INFO] [Email] 正在登录...
2025-10-17 10:01:54,122 [ERROR] [Email] ❌ 其他错误: SMTPServerDisconnected: Connection unexpectedly closed
2025-10-17 10:01:54,122 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100153.json
2025-10-17 10:01:54,122 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:02:00,220 [INFO] [LLM] 成功获取响应 (耗时: 6.10s)
2025-10-17 10:02:00,220 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务器192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务器192.168.250.7:8080的服务状态和端口监听情况",
    "验证网络连通性（防火墙规则、路由设置）",
    "检查Nginx upstream配置是否正确",
    "确认后端应用是否正常启动且无端口冲突",
    "检查服务器资源（CPU、内存、磁盘）是否充足",
    "查看后端应用日志排查启动异常"
  ],
  "solution": {
    "immediate": "重启上游服务器上的应用服务，检查防火墙规则临时开放8080端口，在Nginx配置中设置合理的proxy_connect_timeout",
    "long_term": "完善服务健康检查机制，部署负载均衡和高可用架构，实施监控告警系统，建立自动化故障恢复流程"
  }
}
```
2025-10-17 10:02:00,221 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:02:00,303 [INFO] [Email] 正在登录...
2025-10-17 10:02:00,522 [INFO] [Email] 登录成功
2025-10-17 10:02:00,911 [INFO] [Email] ✅ 成功发送邮件至 1 名收件人
2025-10-17 10:02:00,912 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100200.json
2025-10-17 10:02:00,912 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:02:06,067 [INFO] [LLM] 成功获取响应 (耗时: 5.16s)
2025-10-17 10:02:06,067 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务器192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务器192.168.250.7:8080的服务状态和端口监听",
    "验证网络连通性（防火墙规则、路由设置）",
    "检查负载均衡或服务发现配置",
    "确认后端应用健康状态和资源使用情况",
    "检查Nginx upstream配置是否正确"
  ],
  "solution": {
    "immediate": "重启上游服务或检查服务状态，临时调整Nginx upstream到备用节点",
    "long_term": "完善服务健康检查机制，实现自动故障转移，建立监控告警体系"
  }
}
```
2025-10-17 10:02:06,068 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:02:06,148 [INFO] [Email] 正在登录...
2025-10-17 10:02:06,313 [INFO] [Email] 登录成功
2025-10-17 10:02:06,654 [INFO] [Email] ✅ 成功发送邮件至 1 名收件人
2025-10-17 10:02:06,654 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100206.json
2025-10-17 10:02:06,654 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:02:11,812 [INFO] [LLM] 成功获取响应 (耗时: 5.16s)
2025-10-17 10:02:11,813 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常运行",
    "验证网络连通性（防火墙、路由、端口访问）",
    "检查上游服务配置（监听地址、端口绑定）",
    "确认负载均衡或服务发现配置是否正确",
    "检查应用日志确认服务异常原因"
  ],
  "solution": {
    "immediate": "重启上游服务或检查服务状态，临时调整Nginx upstream到备用节点",
    "long_term": "完善服务健康检查机制，实现自动故障转移，部署监控告警系统"
  }
}
```
2025-10-17 10:02:11,813 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:02:11,883 [INFO] [Email] 正在登录...
2025-10-17 10:02:12,066 [INFO] [Email] 登录成功
2025-10-17 10:02:12,525 [INFO] [Email] ✅ 成功发送邮件至 1 名收件人
2025-10-17 10:02:12,525 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100211.json
2025-10-17 10:02:12,526 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:02:20,991 [INFO] [LLM] 成功获取响应 (耗时: 8.47s)
2025-10-17 10:02:20,992 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务(192.168.250.7:8080)，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务(192.168.250.7:8080)是否正常运行",
    "验证网络连通性：使用ping/telnet测试到192.168.250.7的网络连接",
    "检查防火墙配置：确认8080端口未被阻止",
    "检查上游服务配置：确认Nginx配置中upstream地址和端口正确",
    "检查上游服务日志：查看应用服务是否崩溃或重启",
    "验证服务依赖：确认数据库、缓存等依赖服务正常"
  ],
  "solution": {
    "immediate": "1. 重启上游服务尝试恢复连接 2. 检查服务器资源使用情况(CPU/内存/磁盘) 3. 临时调整Nginx配置指向备用服务节点",
    "long_term": "1. 实施服务健康检查机制 2. 部署负载均衡和多节点冗余 3. 设置监控告警系统 4. 完善日志记录和追踪体系"
  }
}
```
2025-10-17 10:02:20,992 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:02:21,069 [INFO] [Email] 正在登录...
2025-10-17 10:02:21,253 [INFO] [Email] 登录成功
2025-10-17 10:02:21,575 [INFO] [Email] ✅ 成功发送邮件至 1 名收件人
2025-10-17 10:02:21,575 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100220.json
2025-10-17 10:02:21,575 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:02:39,498 [INFO] [LLM] 成功获取响应 (耗时: 17.92s)
2025-10-17 10:02:39,499 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": ["检查上游服务状态（是否运行、监听端口）", "验证网络连通性（防火墙规则、路由配置）", "检查Nginx upstream配置（后端地址正确性）", "查看应用服务日志（资源耗尽或崩溃）"],
  "solution": {
    "immediate": "重启上游服务进程，检查端口监听状态（netstat -tlnp），临时调整Nginx超时配置",
    "long_term": "部署服务健康检查机制，配置负载均衡和高可用架构，完善监控告警系统"
  }
}
```
2025-10-17 10:02:39,499 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:02:39,589 [INFO] [Email] 正在登录...
2025-10-17 10:02:39,768 [INFO] [Email] 登录成功
2025-10-17 10:02:40,123 [INFO] [Email] ✅ 成功发送邮件至 1 名收件人
2025-10-17 10:02:40,123 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100239.json
2025-10-17 10:02:40,123 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 10:02:46,595 [INFO] [LLM] 成功获取响应 (耗时: 6.47s)
2025-10-17 10:02:46,595 [INFO] [LLM Raw Output]:
```json
{
  "summary": "Nginx代理无法连接到上游服务192.168.250.7:8080，导致API请求失败",
  "severity": "高",
  "diagnosis_path": [
    "检查上游服务192.168.250.7:8080是否正常运行（进程状态、端口监听）",
    "验证网络连通性（防火墙规则、路由设置、安全组策略）",
    "检查Nginx upstream配置（服务器地址、端口是否正确）",
    "确认上游服务负载情况（资源使用率、连接数限制）",
    "查看上游服务自身日志（应用启动错误或崩溃记录）"
  ],
  "solution": {
    "immediate": "1. 重启上游服务进程 2. 临时调整Nginx配置将流量切换到备用节点（如有） 3. 检查并放开防火墙规则",
    "long_term": "1. 实施服务健康检查机制 2. 部署负载均衡和高可用架构 3. 完善监控告警系统 4. 建立自动化故障转移流程"
  }
}
```
2025-10-17 10:02:46,596 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 10:02:46,688 [INFO] [Email] 正在登录...
2025-10-17 10:02:46,894 [INFO] [Email] 登录成功
2025-10-17 10:02:47,243 [INFO] [Email] ✅ 成功发送邮件至 1 名收件人
2025-10-17 10:02:47,244 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_100246.json
2025-10-17 10:02:47,244 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,244 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,244 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,244 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,244 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,244 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,244 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,244 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,245 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,245 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,245 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,245 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,245 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,245 [INFO] 【去重】跳过重复告警
2025-10-17 10:02:47,245 [INFO] 【去重】跳过重复告警
2025-10-17 12:47:48,679 [INFO] 🛑 监控已停止
2025-10-17 12:47:56,384 [INFO] [LLM] 已加载模型: DeepSeek-V3-1
2025-10-17 12:47:56,384 [INFO] 监听目录: ./logs
2025-10-17 12:47:56,384 [INFO] 日志监控启动，按 Ctrl+C 停止...
2025-10-17 12:52:34,890 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 12:52:41,013 [INFO] [LLM] 成功获取响应 (耗时: 6.12s)
2025-10-17 12:52:41,014 [INFO] [LLM Raw Output]:
```json
{
  "summary": "用户服务在处理过程中发生空指针异常，导致服务中断",
  "severity": "高",
  "diagnosis_path": [
    "检查UserService.java第45行代码，确认对象初始化或调用前是否进行了空值判断",
    "排查最近部署的代码变更，特别是与用户服务相关的功能修改",
    "检查依赖服务或数据库连接状态，确认数据返回是否正常",
    "验证配置文件中相关参数是否正确加载（如数据源、第三方API端点等）",
    "查看完整异常堆栈，确认是否由上游服务超时或异常响应引发"
  ],
  "solution": {
    "immediate": "重启服务临时恢复，同时回滚到上一个稳定版本；增加异常捕获和日志记录以便后续分析",
    "long_term": "修复空指针异常代码段，增加防御性编程和空值检查；完善单元测试覆盖；建立服务健康监测和自动告警机制"
  }
}
```
2025-10-17 12:52:41,014 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 12:52:41,152 [INFO] [Email] 正在登录...
2025-10-17 12:52:41,444 [INFO] [Email] 登录成功
2025-10-17 12:52:41,870 [INFO] [Email] 成功发送邮件至 1 名收件人
2025-10-17 12:52:41,870 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_125241.json
2025-10-17 12:52:41,870 [INFO] 发现 ERROR 级别日志，触发 AI 分析...
2025-10-17 12:52:46,968 [INFO] [LLM] 成功获取响应 (耗时: 5.10s)
2025-10-17 12:52:46,968 [INFO] [LLM Raw Output]:
```json
{
  "summary": "用户服务在UserService.java第45行发生空指针异常，导致服务运行中断",
  "severity": "高",
  "diagnosis_path": [
    "检查UserService.java第45行代码，确认空值来源",
    "排查方法参数传递或对象初始化是否存在空值情况",
    "检查依赖服务或数据库连接是否正常返回数据",
    "验证配置文件中的必要参数是否完整正确",
    "查看调用链中前置服务是否正常返回预期数据"
  ],
  "solution": {
    "immediate": "重启服务临时恢复，添加异常捕获避免进程退出，同时回滚到稳定版本",
    "long_term": "修复空指针代码逻辑，增加非空校验，添加单元测试覆盖，完善日志记录以便快速定位"
  }
}
```
2025-10-17 12:52:46,969 [INFO] [Email] 正在连接 smtp.qq.com:465 ...
2025-10-17 12:52:47,043 [INFO] [Email] 正在登录...
2025-10-17 12:52:47,187 [INFO] [Email] 登录成功
2025-10-17 12:52:47,518 [INFO] [Email] 成功发送邮件至 1 名收件人
2025-10-17 12:52:47,518 [INFO] ✅ 告警处理完成，报告已保存至: ./reports/20251017/alert_125246.json
